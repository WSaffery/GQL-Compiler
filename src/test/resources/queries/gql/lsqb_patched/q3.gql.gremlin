g.V().hasLabel("Country").as("country").as("#COMPILER_s2137545592").V().hasLabel("Person").as("person1").as("#COMPILER_s-2135291821").toE(Direction.OUT).hasLabel("isLocatedIn").otherV().hasLabel("City").as("city1").toE(Direction.OUT).hasLabel("isPartOf").otherV().where(P.eq("country")).V().hasLabel("Person").as("person2").as("#COMPILER_s538785174").toE(Direction.OUT).hasLabel("isLocatedIn").otherV().hasLabel("City").as("city2").toE(Direction.OUT).hasLabel("isPartOf").otherV().where(P.eq("country")).V().hasLabel("Person").as("person3").as("#COMPILER_s696540469").toE(Direction.OUT).hasLabel("isLocatedIn").otherV().hasLabel("City").as("city3").toE(Direction.OUT).hasLabel("isPartOf").otherV().where(P.eq("country")).select("person1").as("#COMPILER_s1233839490").bothE().hasLabel("knows").otherV().where(P.eq("person2")).bothE().hasLabel("knows").otherV().where(P.eq("person3")).bothE().hasLabel("knows").otherV().where(P.eq("person1")).count().project("COUNT(*)").by()