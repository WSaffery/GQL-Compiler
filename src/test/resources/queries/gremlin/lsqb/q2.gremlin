g.V().match(
    __.as('p1').
    both('knows').as('p2'),
    __.as('p1').
    in('hasCreator').as('c'),
    __.as('p2').
    in('hasCreator').as('p'),
    __.as('c').
    out('replyOf').hasLabel('Post').as('p')
  ).count()